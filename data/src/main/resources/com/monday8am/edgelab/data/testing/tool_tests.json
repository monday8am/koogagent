{
  "tests": [
    {
      "id": "test_0",
      "name": "TEST 0: Basic Response",
      "query": {"text": "Hello, how are you?"},
      "system_prompt": "You are a helpful assistant.",
      "tools": [],
      "rules": [
        {"type": "no_tool_calls"},
        {"type": "response_length_min", "min": 6}
      ]
    },
    {
      "id": "test_1",
      "name": "TEST 1: Location Query",
      "description": ["Expects model to use location tool. 'get_location' should be called."],
      "query": {"text": "Where am I located?"},
      "system_prompt": "You are a helpful assistant with access to location tools.",
      "tools": [
        {
          "type": "function",
          "function": {
            "name": "get_location",
            "description": "Get the user's current location in latitude and longitude format",
            "parameters": {
              "type": "object",
              "properties": {},
              "required": []
            }
          }
        }
      ],
      "mock_tool_responses": {
        "get_location": "{\"latitude\": 40.4168, \"longitude\": -3.7038}"
      },
      "rules": [
        {"type": "tool_match", "tool_name": "get_location"}
      ]
    },
    {
      "id": "test_2",
      "name": "TEST 2: Weather Query (Sequential)",
      "description": ["Expects weather check for current location. Should call get_location then get_weather."],
      "query": {"text": "What's the weather like here?"},
      "system_prompt": "You are a weather assistant with access to weather tools. First you should call get_location to get the location, and then call get_weather with the obtained location.",
      "tools": [
        {
          "type": "function",
          "function": {
            "name": "get_location",
            "description": "Get the user's current location in latitude and longitude format",
            "parameters": {
              "type": "object",
              "properties": {},
              "required": []
            }
          }
        },
        {
          "type": "function",
          "function": {
            "name": "get_weather",
            "description": "Get current weather conditions for a specific location",
            "parameters": {
              "type": "object",
              "properties": {
                "latitude": {
                  "type": "number",
                  "description": "Latitude coordinate (between -90 and 90)"
                },
                "longitude": {
                  "type": "number",
                  "description": "Longitude coordinate (between -180 and 180)"
                }
              },
              "required": ["latitude", "longitude"]
            }
          }
        }
      ],
      "mock_tool_responses": {
        "get_location": "{\"latitude\": 40.4168, \"longitude\": -3.7038}",
        "get_weather": "The weather is sunny"
      },
      "rules": [
        {
          "type": "tool_match_all",
          "tool_names": ["get_location", "get_weather"]
        }
      ]
    },
    {
      "id": "test_3",
      "name": "TEST 3: Specific Weather (One Tool)",
      "description": ["Expects weather check for specific coordinates."],
      "query": {"text": "What is the weather at lat 35.6 and lon 139.7?"},
      "system_prompt": "You are a weather assistant.",
      "tools": [
        {
          "type": "function",
          "function": {
            "name": "get_weather",
            "description": "Get current weather conditions for a specific location",
            "parameters": {
              "type": "object",
              "properties": {
                "latitude": {
                  "type": "number",
                  "description": "Latitude coordinate (between -90 and 90)"
                },
                "longitude": {
                  "type": "number",
                  "description": "Longitude coordinate (between -180 and 180)"
                }
              },
              "required": ["latitude", "longitude"]
            }
          }
        }
      ],
      "mock_tool_responses": {
        "get_weather": "The weather is clear"
      },
      "rules": [
        {
          "type": "tool_args_match",
          "tool_name": "get_weather",
          "args": {"latitude": 35.6, "longitude": 139.7}
        }
      ]
    },
    {
      "id": "test_4",
      "name": "TEST 4: No Tool Needed",
      "description": ["General knowledge question. No tools should be called."],
      "query": {"text": "What is the capital of France?"},
      "system_prompt": "You are a helpful assistant.",
      "tools": [],
      "rules": [
        {"type": "no_tool_calls"}
      ]
    },
    {
      "id": "test_5",
      "name": "TEST 5: Chat with Tool Awareness",
      "description": ["Chit-chat. No tools should be called."],
      "query": {"text": "Tell me a short joke."},
      "system_prompt": "You are a funny assistant.",
      "tools": [],
      "rules": [
        {"type": "chat_valid"}
      ]
    },
    {
      "id": "test_6",
      "name": "TEST 6: Parallel Tool Calls",
      "description": [
        "Expects multiple get_weather calls for different cities.",
        "Model should call get_weather at least twice."
      ],
      "query": {"text": "What's the weather in Tokyo (lat 35.6, lon 139.7) and Paris (lat 48.8, lon 2.3)?"},
      "system_prompt": "You are a weather assistant. When asked about weather in multiple locations, call get_weather for each location.",
      "tools": [
        {
          "type": "function",
          "function": {
            "name": "get_weather",
            "description": "Get current weather conditions for a specific location",
            "parameters": {
              "type": "object",
              "properties": {
                "latitude": {
                  "type": "number",
                  "description": "Latitude coordinate (between -90 and 90)"
                },
                "longitude": {
                  "type": "number",
                  "description": "Longitude coordinate (between -180 and 180)"
                }
              },
              "required": ["latitude", "longitude"]
            }
          }
        }
      ],
      "mock_tool_responses": {
        "get_weather": "The weather is partly cloudy"
      },
      "rules": [
        {"type": "tool_count_min", "min": 2, "tool_name": "get_weather"},
        {
          "type": "tool_args_match",
          "tool_name": "get_weather",
          "args": {"latitude": 35.6, "longitude": 139.7}
        },
        {
          "type": "tool_args_match",
          "tool_name": "get_weather",
          "args": {"latitude": 48.8, "longitude": 2.3}
        }
      ]
    },
    {
      "id": "yazio_1",
      "name": "YAZIO 1: Basic Meal Notification",
      "domain": "yazio",
      "description": ["Generate a simple meal notification without any context."],
      "context": {"mealType": "LUNCH"},
      "query": {"text": "Generate a lunch notification for the user"},
      "system_prompt": "You are a nutritionist assistant that generates personalized meal notifications. Use available tools to gather context.",
      "tools": [
        {
          "type": "function",
          "function": {
            "name": "get_time",
            "description": "Get current date and time",
            "parameters": {
              "type": "object",
              "properties": {},
              "required": []
            }
          }
        },
        {
          "type": "function",
          "function": {
            "name": "get_meal_history",
            "description": "Get meal history for a user",
            "parameters": {
              "type": "object",
              "properties": {
                "mealType": {
                  "type": "string",
                  "description": "Meal type (BREAKFAST, LUNCH, DINNER, SNACK)"
                }
              },
              "required": ["mealType"]
            }
          }
        }
      ],
      "mock_tool_responses": {
        "get_time": "2024-01-15 12:30:00",
        "get_meal_history": "{\"mealType\": \"LUNCH\", \"entries\": [], \"totalCalories\": 0}"
      },
      "rules": [
        {"type": "tool_match", "tool_name": "get_time"},
        {"type": "response_length_min", "min": 20}
      ]
    },
    {
      "id": "yazio_2",
      "name": "YAZIO 2: Weather Aware Notification",
      "domain": "yazio",
      "description": [
        "Generate a lunch notification considering weather conditions.",
        "Should call get_weather and reference weather in the notification."
      ],
      "context": {
        "mealType": "LUNCH",
        "latitude": 40.4,
        "longitude": -3.7
      },
      "query": {"text": "Generate a lunch notification considering the current weather at latitude 40.4, longitude -3.7"},
      "system_prompt": "You are a nutritionist assistant that generates weather-aware meal notifications. Check the weather and suggest appropriate meals.",
      "tools": [
        {
          "type": "function",
          "function": {
            "name": "get_weather",
            "description": "Get current weather conditions for a specific location",
            "parameters": {
              "type": "object",
              "properties": {
                "latitude": {
                  "type": "number",
                  "description": "Latitude coordinate (between -90 and 90)"
                },
                "longitude": {
                  "type": "number",
                  "description": "Longitude coordinate (between -180 and 180)"
                }
              },
              "required": ["latitude", "longitude"]
            }
          }
        },
        {
          "type": "function",
          "function": {
            "name": "get_time",
            "description": "Get current date and time",
            "parameters": {
              "type": "object",
              "properties": {},
              "required": []
            }
          }
        },
        {
          "type": "function",
          "function": {
            "name": "get_meal_history",
            "description": "Get meal history for a user",
            "parameters": {
              "type": "object",
              "properties": {
                "mealType": {
                  "type": "string",
                  "description": "Meal type (BREAKFAST, LUNCH, DINNER, SNACK)"
                }
              },
              "required": ["mealType"]
            }
          }
        }
      ],
      "mock_tool_responses": {
        "get_weather": "{\"condition\": \"sunny\", \"temperature_c\": 32}",
        "get_time": "2024-07-20 13:00:00"
      },
      "rules": [
        {"type": "tool_match", "tool_name": "get_weather"},
        {
          "type": "response_references_any",
          "terms": ["hot", "warm", "sunny", "fresh", "light", "cold"]
        }
      ]
    },
    {
      "id": "yazio_3",
      "name": "YAZIO 3: Meal History Integration",
      "domain": "yazio",
      "description": [
        "Generate a dinner notification based on user's meal history.",
        "Should call get_meal_history and reference previous meals."
      ],
      "context": {"mealType": "DINNER"},
      "query": {"text": "Generate a dinner notification based on meal type DINNER"},
      "system_prompt": "You are a nutritionist assistant. Generate personalized meal notifications based on meal history.",
      "tools": [
        {
          "type": "function",
          "function": {
            "name": "get_meal_history",
            "description": "Get meal history for a user",
            "parameters": {
              "type": "object",
              "properties": {
                "mealType": {
                  "type": "string",
                  "description": "Meal type (BREAKFAST, LUNCH, DINNER, SNACK)"
                }
              },
              "required": ["mealType"]
            }
          }
        },
        {
          "type": "function",
          "function": {
            "name": "get_time",
            "description": "Get current date and time",
            "parameters": {
              "type": "object",
              "properties": {},
              "required": []
            }
          }
        }
      ],
      "mock_tool_responses": {
        "get_meal_history": "{\"mealType\": \"DINNER\", \"entries\": [{\"food\": \"Salad\", \"calories\": 150}, {\"food\": \"Grilled Chicken\", \"calories\": 300}], \"totalCalories\": 450}",
        "get_time": "2024-01-15 19:00:00"
      },
      "rules": [
        {"type": "tool_match", "tool_name": "get_meal_history"},
        {"type": "response_length_min", "min": 30}
      ]
    }
  ]
}
